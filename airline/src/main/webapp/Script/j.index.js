var _Config=_Config||{};_Config.host="http://easternmiles.ceair.com",_Config.menu={jsRoot:_Config.host+"/resource3/js/index/menu/j.[menuId].js"},function(){function e(e){var t="";e.objs.each(function(i,o){$(o).css({position:"absolute",left:i*e.distance+"px"}),t+=o.outerHTML}),e.html=t,e.ul.css("width",e.ranger+"px")}function t(){return a.isAnimate?!1:(a.isAnimate=!0,a.objs.each(function(e,t){$k=$(t),$k.animate({left:t.offsetLeft-a.distance},a.speed,function(){$this=$(this);var e=a.objs.index($this),t=$("li",a.slideDot).eq(e);this.offsetLeft<0?($(this).css("left",a.lastLeft+"px"),t.removeClass("active")):0<=this.offsetLeft&&this.offsetLeft<=a.ranger&&t.addClass("active")})}),setTimeout(function(){a.isAnimate=!1},a.speed+500),void 0)}function i(e){setInterval(function(){e.status&&t()},e.duration)}function o(){if(a.isAnimate)return!1;a.isAnimate=!0,$(".active",a.slideDot).removeClass("active");var e=$(this).attr("code"),t=e,i=$(a.html);i.css({position:"absolute",top:-a.height,opacity:"0"});for(var o=0,n=0;o<a.objs.length;o++)n=e%a.objs.length,$(i[n]).css("left",o*a.distance),e++;for(o=0;o<a.visibNum;o++)n=t%a.objs.length,$("li",a.slideDot).eq(n).addClass("active"),t++;a.ul.append(i),a.objs.each(function(e,t){$(t).animate({top:a.height,opacity:0},a.speed,function(){$(this).remove()})}),i.each(function(e,t){$(t).animate({top:0,opacity:1},a.speed)}),setTimeout(function(){a.objs=i,a.isAnimate=!1},a.speed+500)}function n(e){for(var t=0,i="";t<e.objs.length;t++)i+='<li code="'+t+'" class="m-slide-dot"></li>';var n=(e.ranger-18*e.objs.length)/2,a=$("#slideDot");for(e.slideDot=a,i=$(i),a.mouseenter(function(){e.status=!1,e.over=!0}),a.mouseleave(function(){e.over=!1,setTimeout(function(){e.over||(e.status=!0)},e.duration)}),i.bind("click",o),t=0;t<e.visibNum;t++)$(i[t]).addClass("active");a.css("margin-left",n+"px").html(i)}var a={index:0,eClass:"slide",mode:"translateX",speed:800,initDely:0,duration:5e3,status:!1},r=$(".m_slide_li");if(r.length<=4)return!1;if(r.length>7){for(var s=7;s<r.length;s++)r.eq(s).remove();r=$(".m_slide_li")}var c=r.outerWidth(),l=$("#imageRoll"),u=l.width(),d=Math.ceil(u/c),p=$("#imageAdv");a.ul=p,a.objs=r,a.distance=c,a.ranger=u,a.visibNum=d,a.over=!1,a.lastLeft=(r.length-1)*a.distance,a.height=r.height(),a.isAnimate=!1,e(a),l.mouseenter(function(){a.status=!1,a.over=!0}),l.mouseleave(function(){a.over=!1,setTimeout(function(){a.over||(a.status=!0)},a.duration)}),n(a),setTimeout(function(){a.status=!0,i(a)},a.initDely)}(),function(){function e(){var e=8e3;i.each(function(i,o){setInterval(function(){$(".m-flip",$(o)),$(".m-flip",$(o)).each(function(e,i){var o=$(i);0==i.offsetTop?(o.css("opacity","1"),o.animate({top:-o.height()+"px",opacity:"0"},1e3,function(){o.css("top",t.height())})):(o.css("opacity","0"),o.animate({top:0,opacity:"1"},1e3))})},Math.max(e,15e3*Math.random()%5e4))})}var t,i=$(".m-flip-li"),o=$(".m-flip");i.css({position:"relative",overflow:"hidden"}),o.each(function(e,i){t=$(i),t.css("position","absolute"),t.hasClass("back")?t.css("top","110px"):t.css("top",0)}),e()}(),function(){function e(e){var t=$.extend({mouseenter:!1,period:800,duration:8e3,oTop:0,oLeft:0,speed:"800",faDom:null,objs:null},e);t.faDom=t.faDom||[],t.faDom.length>0&&(t.faDom.css("position","relative"),t.faDom.mouseenter(function(){t.mouseenter=!0}),t.faDom.mouseleave(function(){t.mouseenter=!1})),t.objs.css({position:"absolute",top:t.oTop,left:t.oLeft});var i=0;setInterval(function(){t.mouseenter||(t.objs.eq(i++).fadeOut(t.speed),i%=t.objs.length,t.objs.eq(i).fadeIn(t.speed))},t.duration)}var t=$("#product .latest-news"),i=$("p",t);i.length>1?e({faDom:t,objs:i,oLeft:"15px",oTop:"53px"}):i.show();var o=$("#promotion"),n=$(".latest-promotion",o);n.length>0&&e({faDom:o,objs:n,oLeft:"190px"})}(),function(){function e(){var e=null!=navigator.userAgent.match(/iPad/i);if(e)return!1;var t=null!=navigator.userAgent.match(/iphone|android|phone|mobile|wap|netfront|x11|java|operamobi|operamini|ucweb|windowsce|symbian|symbianos|series|webos|sony|blackberry|dopod|nokia|samsung|palmsource|xda|pieplus|meizu|midp|cldc|motorola|foma|docomo|up.browser|up.link|blazer|helio|hosin|huawei|novarra|coolpad|webos|techfaith|palmsource|alcatel|amoi|ktouch|nexian|ericsson|philips|sagem|wellcom|bunjalloo|maui|smartphone|iemobile|spice|bird|zte-|longcos|pantech|gionee|portalmmm|jig browser|hiptop|benq|haier|^lct|320x320|240x320|176x220/i);return t?!0:!1}function t(){if(e()){if(-1!=location.search.indexOf("utm_source=m.ceair.com"))return localStorage.setItem("autoGoFlag",0),!1;var t=localStorage.getItem("autoGoFlag");if(t&&1==t)location.href="http://m.ceair.com";else{if(t&&0==t)return!1;(null==t||"undefined"==typeof t)&&(confirm("是否跳转到东航官网手机版?")?(localStorage.setItem("autoGoFlag",1),location.href="http://m.ceair.com"):localStorage.setItem("autoGoFlag",0))}}}return window.localStorage?(t(),void 0):!1}(),function(){var lowPriceList=[],_url=_Config.host+"/resource3/js/public/data/domesticLowPrice2014.js",sLi='<li><a href="[url]">[deptTxt] <img src="http://easternmiles.ceair.com/resource3/images/globle/icon_plane.gif"> [arrTxt]<br><span>[date]</span><br>￥<b class="red">[price]</b> 起</a></li>',bookingUrl=_Config.host+"/flight2014/",$ul=$("#preferential #lowerPriceUl"),sList="",getLi=function(e){var t=bookingUrl+e.depCity.substring(0,3).toLowerCase()+"-"+e.arrCity.substring(0,3).toLowerCase()+"-"+e.depDate.substring(2).replace(/-/g,"")+"_CNY.html?from=recommend_home",i=sLi.replace("[url]",t).replace("[date]",e.depDate.substring(5)).replace("[deptTxt]",e.depCity.substring(3)).replace("[arrTxt]",e.arrCity.substring(3)).replace("[price]",e.price);return i};$.LowPrice=function(data){try{var sLi,o;lowPriceList=eval(data);for(var l=lowPriceList.length,i=0;l>i&&6>i;i++)o=lowPriceList[i],o&&(sLi=getLi(o),sList+=sLi);$ul.empty().append(sList),$("a",$ul).attr("onclick","(function(){_gaq.push(['_trackEvent', 'click', location.pathname, '超值机票']);})();")}catch(e){console.log("超值机票处理出错")}},$.getScript(_url);var LowPriceSearch=new function(){var e,t,i=_Config.host+"/l/",o=$('input[name="city_from"]'),n=$('input[name="city_to"]'),a="上海",r="请选择出发城市",s="请选择到达城市",c=function(){e=$.trim(o.val().replace("#","").toUpperCase()),t=$.trim(n.val().replace("#","").toUpperCase());var a=(new Date).format("YYYY-MM-DD").match(/\d{2}-\d{2}/)[0].replace("-","");if(!l())return!1;var r=i+e+"-"+t+"-"+a+".html";open(r)},l=function(){return""==e?(alert(r),!1):""==t?(alert(s),!1):!0},u=function(){if($("#lowPriceBtn").click(c),"undefined"==typeof _cityData)return!1;var e,t="undefined"!=typeof _cityData?_cityData.match(/\^[^\$]+\|CN\|\w{0,2}\$/gi):"",i="undefined"!=typeof _cityData?_cityData.match(/\^[^\$]+\|(?!CN)\w{0,2}\$/gi):"",r="undefined"!=typeof _domesticHotCity?_domesticHotCity.match(/\^[^\$]+#[^\$]+\$/gi):"",s="undefined"!=typeof _i18nHotCity?_i18nHotCity.match(/\^[^\$]+#[^\$]+\$/gi):"";e=_cityData.match(/\^[a-z]{3}#[^$]+\$/gi).join("")||"",o.jCity({dataSource:e,dHot:r,iHot:s,dCity:t,iCity:i}),n.jCity({dataSource:e,dHot:r,iHot:s,dCity:t,iCity:i}),o=$('input[name="city_from"]'),n=$('input[name="city_to"]'),o.prev("input").val(a),o.val("SHA#").attr("nation","CN").attr("region","CN").attr("cityCode","SHA")};u()}}(),function(){var e,t="menu-booking",i=$("#menu li"),o="current",n={},a=new function(){var a=function(){var i=$.trim(location.hash);e=i.length>1?i.substring(1):t},r=function(t){e=t},s=function(){i.removeClass(o),$("#"+e).addClass(o)},c=function(e){n[e]={},n[e].loaded=!0},l=function(){return n[e]&&n[e].loaded},u=function(){$.getScript(_Config.menu.jsRoot.replace("[menuId]",e)),c(e)},d=function(){$("#"+e),h(e),l(e)||u()},p=function(){s(),d()},m=function(t){t.click(function(){var t=$(this).attr("id");return t===e?!1:(r(t),p(),void 0)})},f=function(){if("true"==$(this).attr("noSwitch"))return!1;var e=$(this).attr("rel");"none"!=e&&($(this).parents(".category").find("li").removeClass("active"),$(this).addClass("active"),$(this).parents(".menu-dropdown").find(".b_content").hide(),$(this).parents(".menu-dropdown").find(".b_content#"+e).show())};this.init=function(){var e=window.userTimestamp||(new Date).format("YYYY/MM/DD hh:mm:ss"),t=new Date("2014/01/30 00:00:00").format("YYYY/MM/DD hh:mm:ss"),o=new Date("2014/02/07 00:00:00").format("YYYY/MM/DD hh:mm:ss");if(e>=t&&o>=e){var n=$("#btn_member_search");n.val("新春特惠")}m(i),$(".menu-dropdown ul.category li").live("click",f),a(),p()};var h=function(e){var t=$("menu li#"+e).offset(),i=t.top+64,o=t.left,n=e.replace("menu","");$("section.menu-dropdown").hide(),$("section.menu-dropdown#dropdown"+n).css({top:i+"px",left:o+"px"}),$("section.menu-dropdown#dropdown"+n).show()}};a.init()}();